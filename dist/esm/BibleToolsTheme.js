import{L as e}from"./lit-element-51727a0b.js";import{defineCustomElement as t}from"./utilities.js";var r=(e,t)=>{var r=new Date;r=r.getTime(),localStorage.setItem(e,t),localStorage.setItem("".concat(e,"-last-change"),r)},a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],m=document.documentElement;e="light"===t?"dark":"light",m.classList.add("theme-".concat(t)),m.classList.remove("theme-".concat(e)),a&&r("preference-theme",t)},m=()=>{var e=localStorage.getItem("preference-theme"),t=localStorage.getItem("preference-theme-last-change"),r=new Date,a=((r=r.getTime())-t)/6e4;return a<120&&"light"===e?"light":a<120&&"dark"===e?"dark":void 0};class o extends e{_getThemeFromBrowser(){var e=window.matchMedia("(prefers-color-scheme: dark)");return e.matches?"dark":(e=window.matchMedia("(prefers-color-scheme: light)")).matches?"light":void 0}_getThemeFromDocumentElement(){return document.documentElement.classList.contains("theme-light")?"light":"dark"}_getThemeFromTime(){var e=(new Date).getHours();return e>20||e<5?"dark":"light"}_keepInSync(){window.addEventListener("storage",e=>{var{key:t,newValue:r}=e;"preference-theme"===t&&("dark"!==r&&"light"!==r||a(event.newValue,!0,!1))})}_watchPrefersColorScheme(){window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{!0!==e.matches?"dark"===this._getThemeFromDocumentElement()&&a("light",!0):"light"===this._getThemeFromDocumentElement()&&a("dark",!0)})}firstUpdated(){this._keepInSync(),this._watchPrefersColorScheme(),a(m()||this._getThemeFromBrowser()||this._getThemeFromTime(),!1)}}t("bible-tools-theme",o);export{o as BibleToolsTheme,a as enableTheme,m as getThemeFromStorage};
