import{p as t,a as e,L as s,h as o}from"./lit-element-51727a0b.js";import{c as i}from"./connect-mixin-144a42a2.js";import"./configureStore.js";import{u as r}from"./unsafe-html-8b0a0b93.js";
/**
@license
Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const a=(t,e)=>{const{pattern:s,keys:o}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,o,i,r,a=[],n="",c=t.split("/");for(c[0]||c.shift();i=c.shift();)"*"===(s=i[0])?(a.push("wild"),n+="/(.*)"):":"===s?(o=i.indexOf("?",1),r=i.indexOf(".",1),a.push(i.substring(1,~o?o:~r?r:i.length)),n+=~o&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(n+=(~o?"?":"")+"\\"+i.substring(r))):n+="/"+i;return{keys:a,pattern:new RegExp("^"+n+(e?"(?=$|/)":"/?$"),"i")}}(t),i=e.replace(/(\?|#).*/,""),r=s.exec(i),a=s.test(i);return{active:a,params:a?o.reduce((t,e,s)=>Object.assign(Object.assign({},t),{[e]:r&&r[s+1]||""}),{}):{}}};var n;!function(t){t.ADD_ROUTE="ADD_ROUTE",t.NAVIGATE="NAVIGATE",t.SET_ACTIVE_ROUTE="SET_ACTIVE_ROUTE"}(n||(n={}));const c=t=>((t=>{window.history.pushState({},"",t)})(t),{type:n.NAVIGATE,path:t}),p=({router:{routes:t}},e)=>t&&e&&t[e]||{},l=(t,e)=>e?!!p(t,e).active:(({router:{routes:t}})=>Object.keys(t).reduce((e,s)=>e&&!t[s].active,!0))(t);var h=function(t,e,s,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,o);else for(var n=t.length-1;n>=0;n--)(i=t[n])&&(a=(r<3?i(a):r>3?i(e,s,a):i(e,s))||a);return r>3&&a&&Object.defineProperty(e,s,a),a};let u=!1;var d=a=>{let c=class extends(i(a)(s)){constructor(){super(...arguments),this.active=!1,this.params={},this.isResolving=!1,this.scrollOpt={},this.scrollDisable=!1}firstUpdated(){var t;u||(t=({pathname:t,search:e,hash:s})=>{const o=window.decodeURIComponent(t+e+s);a.dispatch((t=>({type:n.SET_ACTIVE_ROUTE,path:t}))(o))},document.body.addEventListener("click",e=>{if(e.defaultPrevented||0!==e.button||e.metaKey||e.ctrlKey||e.shiftKey)return;const s=e.composedPath().filter(t=>"A"===t.tagName)[0];if(!s||s.target||s.hasAttribute("download")||"external"===s.getAttribute("rel"))return;const o=s.href;if(!o||-1!==o.indexOf("mailto:"))return;const i=window.location,r=i.origin||i.protocol+"//"+i.host;0===o.indexOf(r)&&(e.preventDefault(),o!==i.href&&(window.history.pushState({},"",o),t(i,e)))}),window.addEventListener("popstate",e=>t(window.location,e)),t(window.location,null),u=!0);let e=this.parentElement,{path:s}=this;for(;e;){const t=e.closest("lit-route");t&&(s=`${t.path}${s}`),e=t&&t.parentElement}Boolean(this.querySelector("lit-route"))&&(s+=".*"),this.path=s,this.path&&a.dispatch((t=>({type:n.ADD_ROUTE,path:t}))(this.path))}stateChanged(t){this.active=l(t,this.path),this.params=((t,e)=>p(t,e).params||{})(t,this.path),this.active&&this.resolve&&(this.isResolving=!0,this.resolve().then(()=>{this.isResolving=!1}).catch(()=>{this.isResolving=!1})),this.active&&!this.scrollDisable&&this.scrollOpt&&(0!==Object.keys(this.scrollOpt).length?this.scrollIntoView(Object.assign({},this.scrollOpt)):window.scrollTo(0,0))}getTemplate(t,e){const s=t.replace(/[^A-Za-z0-9-]/,"");let i="";return e&&(i=Object.keys(e).map(t=>` ${t}="${this.params[t]}"`).join("")),o`${r(`<${s}${i}></${s}>`)}`}render(){return this.active?this.resolve&&this.isResolving?this.loading?this.getTemplate(this.loading):o``:this.component?this.getTemplate(this.component,this.params):o`<slot></slot>`:o``}};h([t({type:Boolean,reflect:!0})],c.prototype,"active",void 0),h([t({type:String})],c.prototype,"component",void 0),h([t({type:Object})],c.prototype,"params",void 0),h([t({type:String})],c.prototype,"path",void 0),h([t({type:Boolean})],c.prototype,"isResolving",void 0),h([t({type:Function})],c.prototype,"resolve",void 0),h([t({type:String})],c.prototype,"loading",void 0),h([t({type:Object})],c.prototype,"scrollOpt",void 0),h([t({type:Boolean})],c.prototype,"scrollDisable",void 0),c=h([e("lit-route")],c)};const v={activeRoute:"/",routes:{}},g=(t=v,{type:e="",path:s=""}={})=>{switch(e){case n.NAVIGATE:case n.SET_ACTIVE_ROUTE:return Object.assign(Object.assign({},t),{activeRoute:s,routes:Object.keys(t.routes).reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:a(e,s)}),{})});case n.ADD_ROUTE:return Object.assign(Object.assign({},t),{routes:Object.assign(Object.assign({},t.routes),{[s]:a(s,t.activeRoute)})});default:return t}},y=t=>{t.addReducers({router:g}),d(t)};export{y as c,c as n};
